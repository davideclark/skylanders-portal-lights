<Window
    x:Class="PortalLights.WinUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:PortalLights.WinUI"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:canvas="using:Microsoft.Graphics.Canvas.UI.Xaml"
    mc:Ignorable="d"
    Title="Skylanders Portal Background">

    <Grid x:Name="RootGrid">
        <!-- Two background rectangles for cross-fade effect -->
        <Rectangle x:Name="BackgroundRect1"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Stretch"/>
        <Rectangle x:Name="BackgroundRect2"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Stretch"
                   Opacity="0"/>

        <!-- Particle canvas layer for Win2D particle effects -->
        <canvas:CanvasControl x:Name="ParticleCanvas"
                              Canvas.ZIndex="2"
                              Draw="OnParticleDraw"
                              Loaded="OnParticleCanvasLoaded"
                              ClearColor="Transparent"
                              IsHitTestVisible="False"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Stretch"/>

        <!-- LEFT panel for PS/PC portal (0x0150) -->
        <StackPanel x:Name="LeftFigurePanel"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Margin="40,0,0,0"
                    Spacing="20"
                    Visibility="Collapsed"
                    Background="#80000000"
                    Padding="20"
                    CornerRadius="8"
                    Canvas.ZIndex="10">
        </StackPanel>

        <!-- RIGHT panel for Xbox portal (0x1F17) -->
        <StackPanel x:Name="RightFigurePanel"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Margin="0,0,40,0"
                    Spacing="20"
                    Visibility="Collapsed"
                    Background="#80000000"
                    Padding="20"
                    CornerRadius="8"
                    Canvas.ZIndex="10">
        </StackPanel>

        <!-- Optional: Figure info overlay (can be hidden) -->
        <StackPanel x:Name="InfoPanel"
                    VerticalAlignment="Bottom"
                    HorizontalAlignment="Center"
                    Margin="0,0,0,40"
                    Padding="20,10"
                    Background="#80000000"
                    CornerRadius="8"
                    Canvas.ZIndex="10">
            <TextBlock x:Name="FigureInfoText"
                       Foreground="White"
                       FontSize="36"
                       TextAlignment="Center"
                       FontWeight="SemiBold"/>
        </StackPanel>

        <!-- Instructions overlay (fades out) -->
        <StackPanel x:Name="InstructionsPanel"
                    VerticalAlignment="Top"
                    HorizontalAlignment="Right"
                    Margin="20"
                    Padding="15"
                    Background="#80000000"
                    CornerRadius="8"
                    Canvas.ZIndex="10">
            <TextBlock Foreground="White" FontSize="14">
                <Run Text="ESC - Exit"/><LineBreak/>
                <Run Text="F11 - Toggle Fullscreen"/><LineBreak/>
                <Run Text="I - Toggle Info"/>
            </TextBlock>
        </StackPanel>
    </Grid>
</Window>
